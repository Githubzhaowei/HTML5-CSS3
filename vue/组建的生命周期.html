<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Document</title>
    </head>
    <body>
        <div id="app">
            <App></App>
        </div>
        <script src="../vue.js"></script>
        <script>
            var Test = {
                template: `
                    <div>
                        <div>{{msg}}</div>
                        <button @click="changeHandler">改变</button>
                        <button @click="destoryHandler">销毁</button>
                    </div>
                `,
                // 组建创建之前，可用于loading过度动画
                beforeCreate() {
                    console.log(this.msg);
                },
                // 组件创建之后，使用该组件就要调用created方法之后，在created这个方法中可以操作后端的数据，数据影响试图层
                // 可以发送ajax请求

                created() {
                    console.log(this.msg);
                    this.msg = "改变了么";
                },
                // 挂载数据到DOM之前会调用
                beforeMount() {
                    console.log(document.getElementById("app"));
                },
                // 挂载数据之后调用，vue作用以后的DOM
                mounted() {
                    console.log(document.getElementById("app"));
                },
                // 在更新DOM之前 ，可以获取原来的DOM
                beforeUpdate() {
                    console.log(document.getElementById("app").innerHTML);
                },
                // 更新DOM之后，获取最新DOM
                updated() {
                    console.log(document.getElementById("app").innerHTML);
                },
                beforeDestroy() {
                    console.log("beforeDestroy");
                },
                destroyed() {
                    console.log("destroyed");
                },
                // Vue内置组件，能在租间切换过程中将状态保留在内存中，防止重复渲染
                activated() {
                    console.log("被激活了");
                },
                deactivated() {
                    console.log("被停用了");
                },
                data() {
                    return {
                        msg: "hello",
                    };
                },
                methods: {
                    changeHandler() {
                        this.msg = this.msg + "haha";
                    },
                    destoryHandler() {
                        this.$emit("destoryHandler");
                    },
                },
            };

            var App = {
                template: `
                    <div>
                        <keep-alive>
                            <Test @destoryHandler="destoryHandler" v-if="isShow"/>
                        </keep-alive>
                        <button @click="activated">停用</button>                        
                    </div>
                `,
                components: {
                    Test,
                },
                data() {
                    return {
                        isShow: true,
                    };
                },
                methods: {
                    destoryHandler() {
                        this.isShow = !this.isShow;
                    },
                    activated() {
                        this.isShow = !this.isShow;
                    },
                },
            };

            new Vue({
                el: "#app",
                data() {
                    return {};
                },
                components: {
                    App,
                },
            });
        </script>
    </body>
</html>
